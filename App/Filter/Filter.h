/*********************************************************************************************************
* 模块名称: XXX.h
* 摘    要: 模块实现具体功能
* 当前版本: 1.0.0
* 作    者: XXX
* 完成日期: 2024年12月14日
* 内    容:
* 注    意:
**********************************************************************************************************
* 取代版本:
* 作    者:
* 完成日期:
* 修改内容:
* 修改文件:
*********************************************************************************************************/
#ifndef FILTER_H
#define FILTER_H

/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/

/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/
extern unsigned char SPO2_Filter_Flag;    //默认IIR滤波
#define EC_SmoothFILTER_WINDOW_SIZE 6 // 滤波窗口

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/
//平滑滤波器
typedef struct {
    float buffer[EC_SmoothFILTER_WINDOW_SIZE]; // 历史数据缓冲
    int head;                       // 当前写入位置索引
    float sum;                        // 当前窗口内的累加和
} SPO2_Filter_Smooth_Struct;

/*********************************************************************************************************
*                                              外部变量声明
*********************************************************************************************************/

/*********************************************************************************************************
*                                              API函数声明
*********************************************************************************************************/
//函数声明
void SPO2_RED_Filter(float* x);
void SPO2_IR_Filter(float* x);
void InitFilter(void);
void SPO2_Filter_Smooth_Init(SPO2_Filter_Smooth_Struct *filter);


#endif


